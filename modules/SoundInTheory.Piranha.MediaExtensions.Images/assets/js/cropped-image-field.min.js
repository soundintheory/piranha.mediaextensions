Vue.component("cropped-image-field",{props:["uid","model","meta"],methods:{select:function(){null!=this.model.media?piranha.mediapicker.open(this.update,"Image",this.model.media.folderId):piranha.mediapicker.openCurrentFolder(this.update,"Image")},open:function(e,i){},openPreview:function(){piranha.preview.field=this,piranha.preview.load(this.model.id),$("#previewModal").modal({backdrop:"static"}),$("#previewModal").one("hide.bs.modal",function(){setTimeout(()=>{piranha.preview.field=null},1)})},remove:function(){this.model.id=null,this.model.media=null},edit:function(e){console.log("edit callback!",e)},update:function(e){"Image"===e.type?(this.model.id=e.id,this.model.media={id:e.id,folderId:e.folderId,type:e.type,filename:e.filename,title:e.title,contentType:e.contentType,publicUrl:e.publicUrl},this.meta.notifyChange&&this.$emit("update-title",{uid:this.uid,title:null!=this.model.media.title?this.model.media.title+" ("+this.model.media.filename+")":this.model.media.filename})):console.log("No image was selected")}},computed:{isEmpty:function(){return null==this.model.media}},mounted:function(){this.model.getTitle=function(){return null!=this.model.media?null!=this.model.media.title?this.model.media.title+" ("+this.model.media.filename+")":this.model.media.filename:"No image selected"}},template:'\n<div class="media-field" :class="{ empty: isEmpty }">\n    <div class="media-picker">\n        <div class="btn-group float-right">\n            <button v-if="!isEmpty" v-on:click.prevent="openPreview" class="btn btn-info btn-aspect text-center">\n                <i class="fas fa-cog"></i>\n            </button>\n            <button v-on:click.prevent="select" class="btn btn-primary text-center">\n                <i class="fas fa-plus"></i>\n            </button>\n            <button v-on:click.prevent="remove" class="btn btn-danger text-center">\n                <i class="fas fa-times"></i>\n            </button>\n        </div>\n        <div class="card text-left">\n            <div class="card-body" v-if="isEmpty">\n                <span v-if="meta.placeholder != null" class="text-secondary">{{ meta.placeholder }}</span>\n                <span v-if="meta.placeholder == null" class="text-secondary">&nbsp;</span>\n            </div>\n            <div class="card-body" v-else-if="model.media.title != null">\n                <a href="#" v-on:click.prevent="openPreview">{{ model.media.title }} ({{ model.media.filename }})</a>\n            </div>\n            <div class="card-body" v-else>\n                <a href="#" v-on:click.prevent="openPreview">{{ model.media.filename }}</a>\n            </div>\n        </div>\n    </div>\n</div>\n'});